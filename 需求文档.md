# 产品需求文档 (PRD): LumiWrite

**项目名称**：LumiWrite (Luminous Writer)
**核心对标**：Typora / Obsidian / Bear
**核心理念**：所见即所得、极简、本地优先
**技术栈**：Flutter (UI/编辑器) + Rust (文件系统/扩展能力)

---

## 0. 当前实现进度（2026-02-04）

已实现：
- Markdown 基础格式渲染（H1-H6、段落、引用、列表、任务）
- 行内样式（加粗/斜体/删除线/高亮）
- 代码块语法高亮 + 语言选择
- 表格渲染与编辑（多行单元格、行列插入/删除）
- 侧边栏文件树 + 目录大纲（可点击跳转）
- 文件打开/保存（Ctrl+S）
- 撤销/重做 + 热键配置（hotkeys.json）
- 主题跟随系统

未实现（待做）：
- 混合编辑（源码/预览切换）
- 图片粘贴与资产管理
- Rust notify 文件监听
- 自定义标题栏
- 导出（HTML/PDF/长图）

---

## 1. 产品定位

- 本地优先的 Markdown 编辑器
- 目标体验：Typora 的“文档流编辑” + 现代 UI
- 强调：轻量、响应快、离线可用

---

## 2. 核心体验设计

### 2.1 混合编辑（Hybrid Editing）
- 当光标不在当前行时，显示渲染效果
- 当光标进入当前行时，显示 Markdown 源码
- 该功能为核心体验，尚未实现

### 2.2 写作沉浸感
- 目标包含：Typewriter/Focus 模式、干净布局
- 当前仅完成基础主题切换

---

## 3. 功能规格

### 3.1 编辑器
- **基础格式**：标题 H1-H6、段落、引用、列表、任务列表（已实现）
- **行内样式**：加粗/斜体/删除线/高亮（已实现）
- **代码块**：语法高亮 + 语言选择（已实现）
- **表格**：渲染与编辑（多行单元格、行列插入/删除）（已实现）
- **图片**：Ctrl+V 粘贴并保存到 assets（未实现）
- **快捷键**：撤销/重做 + 可配置（已实现）

### 3.2 文件管理
- **打开/保存**：本地文件读写（已实现）
- **侧边栏文件树**：展示工作区文件结构（已实现）
- **目录大纲**：基于 H1-H6 生成并可跳转（已实现）
- **文件监听**：Rust notify 自动同步（未实现）

### 3.3 导出
- HTML / PDF / 长图导出（未实现）

### 3.4 打包与应用图标
- 图标资源使用 `flutter_launcher_icons` 生成
- 源文件默认放在项目根目录的 `app.png`
- 生成命令：
  - `flutter pub run flutter_launcher_icons:main`

---

## 4. 技术架构

- **Flutter**：UI 渲染、编辑器、快捷键、交互
- **Rust**：文件系统 IO、监听、图片处理、导出
- **Bridge**：flutter_rust_bridge 作为通信层

---

## 5. MVP 里程碑

- Week 1-2：项目骨架 + 文件读写
- Week 3-4：编辑器核心（Markdown 渲染、代码块、表格）
- Week 5：文件树 + 大纲 + 文件监听
- Week 6：图片与资产
- Week 7-8：UI 抛光 + 打包发布

---

## 6. 非目标（MVP 不做）
- 多标签页
- 云同步
- Git 集成
- 插件系统
- 复杂图表（Mermaid/Flowchart/ECharts）
- 全文搜索
