# LumiWrite MVP 方案 (Minimum Viable Product)

> 目标：在 8 周内构建一个可用、美观、本地优先的 Markdown 编辑器，核心体验对标 Typora。

## 1. 核心价值主张
1. 快：启动快、打开文件快
2. 美：极简 UI，所见即所得
3. 本地优先：文件落盘，数据可控

## 2. 功能边界 (Scope)

### ✅ Must Have (MVP 必做)
| 模块 | 功能点 | 描述 | 状态 |
| :--- | :--- | :--- | :--- |
| 编辑器 | 混合渲染 | 光标所在行源码，移开显示渲染 (Typora 模式) | 未实现 |
|  | 基础格式 | 标题 H1-H6、段落、引用、列表（无序/有序/任务）、加粗/斜体/删除线/高亮 | 已实现 |
|  | 代码块 | 语法高亮 + 语言选择/显示 | 已实现 |
|  | 表格 | Markdown 表格渲染与编辑（多行单元格、行列增删） | 已实现 |
|  | 图片 | Ctrl+V 粘贴图片，自动保存到 ./assets | 未实现 |
| 文件管理 | 侧边栏文件树 | 以文件夹为核心的工作区，树形展示文件 | 已实现（Flutter） |
|  | 目录大纲 | 基于 H1-H6 生成大纲，点击跳转 | 已实现 |
|  | 文件监听 | 外部修改/删除自动同步 (Rust notify) | 未实现 |
|  | 持久化 | Ctrl+S 保存到本地磁盘 | 已实现 |
| 快捷键 | 撤销/重做 + 可配置 | Ctrl+Z/Ctrl+Y 默认，支持 hotkeys.json 配置 | 已实现 |
| UI/UX | 极简窗口 | 隐藏系统标题栏，自定义窗口按钮 | 未实现 |
|  | 深色模式 | 跟随系统 Light/Dark | 已实现 |
| 发布 | 安装包 | Windows/macOS 打包 | 未实现 |

### ❌ Won't Have (MVP 暂不做)
- 多标签页
- 云同步
- Git 集成
- 插件系统
- 复杂图表（Mermaid/Flowchart/ECharts）
- 全文搜索
- 高级大纲视图（折叠/拖拽/多文档）

## 3. 技术关键路径 (Critical Path)

### 3.1 编辑器核心
- 基于 `super_editor` 进行定制，目标是 Typora 式文档流体验
- 需要处理 Markdown 解析/序列化、样式系统、键盘交互等

### 3.2 Flutter <-> Rust
- Flutter：UI 渲染与交互、快捷键处理
- Rust：文件 I/O、文件监听（notify）、图片处理、导出

## 4. 8 周计划 (Timeline)

- Week 1-2：项目骨架
  - [x] Flutter + Rust 初始化
  - [x] 基础文件读写
- Week 3-4：编辑器核心
  - [x] 基础 Markdown 渲染
  - [x] 代码块语法高亮 + 语言选择
  - [x] 任务列表语法识别
  - [x] 表格渲染与编辑
  - [ ] 混合渲染（源码/预览切换）
- Week 5：文件系统
  - [x] 侧边栏文件树（Flutter）
  - [x] 目录大纲（Outline）
  - [ ] Rust notify 文件监听
- Week 6：图片与资源
  - [ ] Ctrl+V 粘贴图片与自动保存
- Week 7：UI 抛光
  - [x] 主题跟随系统
  - [ ] 自定义标题栏
- Week 8：测试与打包
  - [ ] 修复关键问题
  - [ ] Windows/macOS 打包

## 5. 验收标准 (Definition of Done)
1. 可打开并编辑 Markdown 文档，基础格式渲染正确
2. 代码块可高亮并选择语言
3. 表格可编辑（多行 + 行列增删）
4. 文件可保存并重新打开
